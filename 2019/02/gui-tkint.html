<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


  <title>Fast GUI programming with Tk and Python</title>


  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin" />
  <meta name="generator" content="Pelican" />
  <link href="/" rel="canonical" />

  <!-- Feed -->

  <link href="/theme/css/style.css" type="text/css" rel="stylesheet" />

  <!-- Code highlight color scheme -->
      <link href="/theme/css/code_blocks/github.css" rel="stylesheet">




  <!-- Custom fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,300' rel='stylesheet' type='text/css' />
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css" />

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->


  <link href="/2019/02/gui-tkint.html" rel="canonical" />

    <meta name="description" content="Intro Much of a theoretician's work involves running calculations. we feed in data and parameters and get data and paraemeters back....">

    <meta name="author" content="victor">

    <meta name="tags" content="GUI">
    <meta name="tags" content="Tkinter">
    <meta name="tags" content="interactivity">




<!-- Open Graph -->
<meta property="og:site_name" content="AD(P)HD"/>
<meta property="og:title" content="Fast GUI programming with Tk and Python"/>
<meta property="og:description" content="Intro Much of a theoretician's work involves running calculations. we feed in data and parameters and get data and paraemeters back...."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="/2019/02/gui-tkint.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2019-02-04 00:00:00+00:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="/author/victor">
  <meta property="article:publisher" content="https://www.facebook.com/vlnascimento" />
<meta property="article:section" content="GUI Programming"/>
<meta property="article:tag" content="GUI"/>
<meta property="article:tag" content="Tkinter"/>
<meta property="article:tag" content="interactivity"/>
<meta property="og:image" content="/assets/images/page_header.jpg">

<!-- Twitter Card -->

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Fast GUI programming with Tk and Python",
  "headline": "Fast GUI programming with Tk and Python",
  "datePublished": "2019-02-04 00:00:00+00:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "victor",
    "url": "/author/victor"
  },
  "image": "/assets/images/page_header.jpg",
  "url": "/2019/02/gui-tkint.html",
  "description": "Intro Much of a theoretician's work involves running calculations. we feed in data and parameters and get data and paraemeters back...."
}
</script>
</head>
<!-- TODO : Body class -->
<body class="home-template">

<nav id="menu">
  <a class="close-button">Close</a>
  <div class="nav-wrapper">
    <p class="nav-label">Menu</p>
    <ul>

                  <li role="presentation"><a href="/category/classical-mechanics">Classical Mechanics</a></li>
                  <li role="presentation"><a href="/category/crystallography">Crystallography</a></li>
                  <li role="presentation"><a href="/category/graphics">Graphics</a></li>
                  <li class="nav-gui-programming active" role="presentation"><a href="/category/gui-programming">GUI Programming</a></li>
                  <li role="presentation"><a href="/category/mathematics">Mathematics</a></li>
                  <li role="presentation"><a href="/category/miscellania">Miscellania</a></li>
                  <li role="presentation"><a href="/category/vim-scripting">Vim Scripting</a></li>

    </ul>
  </div>
</nav>
    <!-- Progressbar -->
    <div class="progress-container">
        <span class="progress-bar"></span>
    </div>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header id="post-header" class="has-cover">
      <div class="inner">
        <nav id="navigation">
            <span id="home-button" class="nav-button">
                <a class="home-button" href="/" title="Home"><i class="ic ic-arrow-left"></i> Home</a>
            </span>
          <span id="menu-button" class="nav-button">
            <a class="menu-button"><i class="ic ic-menu"></i> Menu</a>
          </span>
        </nav>
        <h1 class="post-title">Fast GUI programming with Tk and Python</h1>
        <!-- TODO : Proper class for headline -->
        <span class="post-meta">
                <a href="/author/victor">Victor Do Nascimento</a>
            | <time datetime="04 Feb 2019">04 Feb 2019</time>
        </span>
        <!-- TODO : Modified check -->
            <div class="post-cover cover" style="background-image: url('/assets/images/page_header.jpg')">
      </div>
    </header>

  <section id="wrapper">
    <a class="hidden-close"></a>

    <!-- Post content -->
    <main class="content" role="main">
        <article class="post">
        <div class="inner">
            <section class="post-content">
                <h2>Intro</h2>
<p>Much of a theoretician's work involves running calculations. we feed in data and parameters and get
data and paraemeters back. From these numbers alone, it's often very difficult to draw much meaningful
insight.</p>
<p>To overcome our limitations in extracting info directly fom numbers we make recourse to graphs and 
figures. In Python, my programming languages of choice, Matplotlib makes drawing a graph, arbitrarily
straight forward.</p>
<p>The native support for interactivity is, however, very lacking. There's no way to vary parameters in
a graph on the fly. </p>
<p>This is where Tkinter comes in. the <strong><em>Tk</em></strong> <strong><em>inter</em></strong>face provides a method for rapid graphical 
interface development and using Tkinter we can effortlessly add interactivity to a matplotlib plot
and much else.</p>
<h2>Hello World!</h2>
<p>No introduction to programming is complete without Hell world!. we therefore start by making a simple
window with a "Hello World!" button:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">Tk</span><span class="p">()</span>

<span class="n">w</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Hello, world!&quot;</span><span class="p">)</span>
<span class="n">w</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre></div>


<figure>
  <img src="\..\assets\images\gui\tkHello.png" alt="Tk's Hello World! window" style="width:75%; margin-left: auto; margin-right: auto;"/>
  <figcaption> Our rather unimpressive Hello World! window </figcaption>
</figure>

<p>While this exammple is arguably not particularly exciting, it allows us to discuss the basic anatomy
of a tkInter program.</p>
<p>the implementation of Tcl/Tk in Python takes advantage of Python's capacity for object-orientation
and windows are objects to which we may bind fither objects.</p>
<p>after importing tkinter via the <strong>import</strong> directive, the first thing we do is create the <strong>root</strong>
widget. This is an ordinary window, with a title bar and other decoration provided by your window
manager. It serves as the foundation for everything we may subsequently add to our program.</p>
<p>We should only have root widget for each program, and it must be created before any other widgets. </p>
<p>We then add other widgets by instantiating these and <em>packing</em> them in our root. Here we make a 
Label widget:</p>
<div class="highlight"><pre><span></span>  <span class="n">w</span> <span class="o">=</span> <span class="n">Label</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;Hello, world!&quot;</span><span class="p">)</span>
  <span class="n">w</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>
</pre></div>


<p>Once we havd added all the widgets we may wish to use in our program, we create the main execution
loop. This is the loop that keeps the window on the user's screen, listening to inputs and cues for
further execution. It exits the loop until we close the window..</p>
<h2>Calculator</h2>
<p>With the basic tk anatomy under our belt, we may proceed to analyse slightly more interesting examples,
The classic being a simple calculator.</p>
<p>We start off by creating functions to automate the creation of the basic components of our calculator.
Calculators need buttons and a display. We start with these.</p>
<h4>Buttons</h4>
<p>The layout of a typical calculator arranges buttons in rows of 3. We can mimic this organization in our
code by assigning buttons to <strong>frame</strong> widgets, each representing a row.</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">button</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">side</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
  <span class="n">w</span> <span class="o">=</span> <span class="n">Button</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">text</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="n">command</span><span class="p">)</span>
  <span class="n">w</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">side</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="n">YES</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">BOTH</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">w</span>

<span class="k">def</span> <span class="nf">frame</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
  <span class="n">w</span> <span class="o">=</span> <span class="n">Frame</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
  <span class="n">w</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">side</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="n">YES</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">BOTH</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">w</span>
</pre></div>


<h4>Display</h4>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">screen</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">side</span><span class="p">):</span>
  <span class="n">w</span> <span class="o">=</span> <span class="n">Entry</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="n">relief</span><span class="o">=</span><span class="n">SUNKEN</span><span class="p">,</span>
        <span class="n">textvariable</span><span class="o">=</span><span class="n">text</span><span class="p">)</span>
  <span class="n">w</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="n">side</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="n">YES</span><span class="p">,</span>
         <span class="n">fill</span><span class="o">=</span><span class="n">BOTH</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">w</span>
</pre></div>


<h3>The Calculautor object</h3>
<div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Calculator</span><span class="p">(</span><span class="n">Frame</span><span class="p">):</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">Frame</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">expand</span><span class="o">=</span><span class="n">YES</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">BOTH</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Simple Calculator&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">master</span><span class="o">.</span><span class="n">iconname</span><span class="p">(</span><span class="s1">&#39;calc1&#39;</span><span class="p">)</span>

    <span class="n">display</span> <span class="o">=</span> <span class="n">StringVar</span><span class="p">()</span>
    <span class="n">screen</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="n">display</span><span class="p">,</span> <span class="n">side</span><span class="o">=</span><span class="n">TOP</span><span class="p">)</span>

    <span class="c1"># Create number buttons. Allow for negative</span>
    <span class="c1"># and decimal numbers with - and . buttons:</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;123&quot;</span><span class="p">,</span> <span class="s2">&quot;456&quot;</span><span class="p">,</span> <span class="s2">&quot;789&quot;</span><span class="p">,</span> <span class="s2">&quot;-0.&quot;</span><span class="p">):</span>
      <span class="n">keyF</span> <span class="o">=</span> <span class="n">frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">TOP</span><span class="p">)</span>
      <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
        <span class="n">button</span><span class="p">(</span><span class="n">keyF</span><span class="p">,</span> <span class="n">LEFT</span><span class="p">,</span> <span class="n">char</span><span class="p">,</span>
               <span class="k">lambda</span> <span class="n">w</span><span class="o">=</span><span class="n">display</span><span class="p">;</span> <span class="n">s</span><span class="o">=</span><span class="s1">&#39; </span><span class="si">%s</span><span class="s1"> &#39;</span><span class="o">%</span><span class="n">char</span><span class="p">:</span>
                 <span class="n">w</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">+</span><span class="n">s</span><span class="p">))</span>

    <span class="c1"># Create buttons for arithmetic operations:</span>
    <span class="n">opsF</span> <span class="o">=</span> <span class="n">frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">TOP</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">char</span> <span class="ow">in</span> <span class="s2">&quot;+-*/=&quot;</span><span class="p">:</span>
      <span class="k">if</span> <span class="n">char</span> <span class="o">==</span> <span class="s1">&#39;=&#39;</span><span class="p">:</span>
        <span class="n">btn</span> <span class="o">=</span> <span class="n">button</span><span class="p">(</span><span class="n">opsF</span><span class="p">,</span> <span class="n">LEFT</span><span class="p">,</span> <span class="n">char</span><span class="p">)</span>
        <span class="n">btn</span><span class="o">.</span><span class="n">bind</span><span class="p">(</span><span class="s1">&#39;&lt;ButtonRelease-1&gt;&#39;</span><span class="p">,</span>
                 <span class="k">lambda</span> <span class="n">e</span><span class="p">,</span> <span class="n">s</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span> <span class="n">w</span><span class="o">=</span><span class="n">display</span><span class="p">:</span>
                   <span class="n">s</span><span class="o">.</span><span class="n">calc</span><span class="p">(</span><span class="n">w</span><span class="p">),</span> <span class="s1">&#39;+&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">btn</span> <span class="o">=</span> <span class="n">button</span><span class="p">(</span><span class="n">opsF</span><span class="p">,</span> <span class="n">LEFT</span><span class="p">,</span> <span class="n">char</span><span class="p">,</span>
                     <span class="k">lambda</span> <span class="n">w</span><span class="o">=</span><span class="n">display</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="n">char</span><span class="p">:</span>
                       <span class="n">w</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">w</span><span class="o">.</span><span class="n">get</span><span class="p">()</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="o">+</span><span class="n">c</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="p">))</span>

    <span class="c1"># Finally, we create the clear button to </span>
    <span class="c1"># reset our calculator:</span>
    <span class="n">clearF</span> <span class="o">=</span> <span class="n">frame</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">BOTTOM</span><span class="p">)</span>
    <span class="n">button</span><span class="p">(</span><span class="n">clearF</span><span class="p">,</span> <span class="n">LEFT</span><span class="p">,</span> <span class="s1">&#39;Clr&#39;</span><span class="p">,</span> 
           <span class="k">lambda</span> <span class="n">w</span><span class="o">=</span><span class="n">display</span><span class="p">:</span> <span class="n">w</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">))</span>
</pre></div>


<h2>Canvas</h2>
<p>The final piece in the puzzle for understanding the basics of Tkinter is the <strong>canvas widget</strong>.</p>
<p>To have graphics displayed on a window, these must be rendered by the backend. When a matplotlib
figure is displayed in python, a call to the canvas is made.</p>
<p>We can see the canvas in action by drawing a room in perspective:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">tkinter</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">master</span> <span class="o">=</span> <span class="n">Tk</span><span class="p">()</span>

<span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;blue&quot;</span><span class="p">,</span> <span class="s2">&quot;red&quot;</span><span class="p">]</span>

<span class="n">w</span> <span class="o">=</span> <span class="n">Canvas</span><span class="p">(</span><span class="n">master</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">w</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

<span class="n">w</span><span class="o">.</span><span class="n">create_line</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
<span class="n">w</span><span class="o">.</span><span class="n">create_line</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>

<span class="n">w</span><span class="o">.</span><span class="n">create_rectangle</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span> <span class="mi">25</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="n">mainloop</span><span class="p">()</span>
</pre></div>


<p>we can actually do one better. We can replace the implicit (infinite) loop in the mainloop() function
for a loop of our making, and we can update tkinter's inner workings in every interation of our loop
using the update() function.
function.</p>
<div class="highlight"><pre><span></span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>

<span class="c1"># mainloop() commented out</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
  <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>
  <span class="n">i</span> <span class="o">=</span> <span class="p">(</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span>
  <span class="n">w</span><span class="o">.</span><span class="n">itemconfig</span><span class="p">(</span><span class="n">rec</span><span class="p">,</span> <span class="n">fill</span><span class="o">=</span><span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
  <span class="n">w</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</pre></div>


<h3>Matplotlib and Tk</h3>
<p>When we write Matplotlib (<strong>MPL</strong>) code, we are interacting with the frontend of the library, the point at 
which we as the programmers inteact with the code. Once we execute our code, it carries out 
operations abstracted away from sight. This is the application's backend.</p>
<p>There are two types of backends in Matplotlib: user interface backends (also referred to as 
“interactive backends”) and hardcopy backends used to make image files (also referred to as 
“non-interactive backends”). </p>
<p>Matplotlib, in iall its hidden comlpexity, handles both types of backends and for each of these, all
its different variants. For user interface backends, for example, we have:</p>
<ul>
<li>pygtk</li>
<li>wxpython </li>
<li>tkinter </li>
<li>qt4</li>
</ul>
<p>...to name but a few. When we end a graphing script with plt.show(), we call on the default user 
interface backend and when we call plt.savefig(...), the default hardcopy backend.</p>
<p>We can set defaults for a given script as follows:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;PS&#39;</span><span class="p">)</span>   <span class="c1"># generate postscript by default</span>
</pre></div>


<p>This <strong>MUST</strong> be done before importing pyplot, see the <a href="https://matplotlib.org/faq/usage_faq.html">Matplotlib FAQ</a>.</p>
<p>By setting specific backends, we can use MPL in a rich variety of contexts, such as graphical user
interfaces and web application servers.</p>
<p>matplotlib separates the concept of the <strong>renderer</strong> (<em>the thing that actually does the drawing</em>) from 
the <strong>canvas</strong> (<em>the place where the drawing goes</em>).</p>
<p>Most canvasses are compatible with the Anti-Grain Geometry C++ (agg) library to raster the image. When
setting up the backend for MPL, we choose a combination of renderer and canvas. Here are some examples
taken from Matplotlib's FAQ.</p>
<table>
<thead>
<tr>
<th align="center">Backend</th>
<th align="center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center">GTKAgg</td>
<td align="center">Agg rendering to a GTK 2.x canvas</td>
</tr>
<tr>
<td align="center">GTK</td>
<td align="center">GDK rendering to a GTK 2.x canvas</td>
</tr>
<tr>
<td align="center">GTKCairo</td>
<td align="center">Cairo rendering to a GTK 2.x canvas</td>
</tr>
<tr>
<td align="center">TkAgg</td>
<td align="center">Agg rendering to a Tk canvas</td>
</tr>
</tbody>
</table>
<p>If we wish to incorporate MPL into our Tkinter UI, we must therefore make sure of two things:</p>
<ol>
<li>Matplotlib is set to render correctly.</li>
<li>The Tkinter Canvas is compatible with the rendering method used by MPL</li>
</ol>
<p>Rendering to Tk with agg is the default behaviour for Matplotlib. We can check for this:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="n">matplotlib</span><span class="o">.</span><span class="n">get_backend</span><span class="p">()</span>
</pre></div>


<p>The canvas widget can be instantiated correctly as follows:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">matplotlib.backends.backend_tkagg</span> <span class="kn">import</span> <span class="n">FigureCanvasTkAgg</span>
<span class="n">w</span> <span class="o">=</span> <span class="n">FigureCanvasTkAgg</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>


<p>The <code>FigureCanvasTkAgg()</code> function takes two arguments:</p>
<ol>
<li>A matplotlib Figure object</li>
<li>The widget's frame.</li>
</ol>
<p>Whenever a change is to the underlying Figure object, the canvas can be updated using its <code>draw()</code> 
method.</p>
<h3>The Damped oscillator</h3>
<p>We can put all we've learned together using the example of a damped oscillator, where the user is 
able to change the level of oscillation.</p>
<p>Suppose we have an RLC circuit. It's voltage is given by:</p>
<div class="math">\begin{equation}
  \label{fig:RLC}
  V_{c}(t) = V_{0}e^{-\alpha t}\,cos(\beta t)
\end{equation}</div>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">matplotlib.backends.backend_tkagg</span> \
  <span class="kn">import</span> <span class="n">FigureCanvasTkAgg</span>
<span class="kn">from</span> <span class="nn">matplotlib.figure</span> <span class="kn">import</span> <span class="n">Figure</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">math</span> <span class="kn">import</span> <span class="n">pi</span>
<span class="kn">import</span> <span class="nn">tkinter</span>

<span class="k">class</span> <span class="nc">App</span><span class="p">:</span>
  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">master</span><span class="p">):</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">set_vars</span><span class="p">()</span>
    <span class="c1"># Create our container:</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Frame</span><span class="p">(</span><span class="n">master</span><span class="p">)</span>

    <span class="c1"># Make user interface:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">make_ui</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>

    <span class="c1"># Create our figure object</span>
    <span class="n">fig</span>         <span class="o">=</span> <span class="n">Figure</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ax</span>     <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">add_subplot</span><span class="p">(</span><span class="mi">111</span><span class="p">)</span>
    <span class="n">v</span>           <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vt</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="p">,</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">,</span> <span class="n">v</span><span class="p">,</span>\
                  <span class="n">label</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

    <span class="c1"># Create our canvas</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span> <span class="o">=</span> <span class="n">FigureCanvasTkAgg</span><span class="p">(</span><span class="n">fig</span><span class="p">,</span><span class="n">master</span><span class="o">=</span><span class="n">master</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">get_tk_widget</span><span class="p">()</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s1">&#39;top&#39;</span><span class="p">,</span>\
                <span class="n">fill</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">expand</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">frame</span><span class="o">.</span><span class="n">pack</span><span class="p">()</span>

  <span class="k">def</span> <span class="nf">make_ui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">frame</span><span class="p">):</span>
    <span class="c1"># Create two buttons:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">button_left</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span>
                <span class="n">text</span> <span class="o">=</span> <span class="s2">&quot;Decrease damping&quot;</span><span class="p">,</span>
                        <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">decrease</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">button_left</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">button_right</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span>
                        <span class="n">text</span>    <span class="o">=</span> <span class="s2">&quot;Increase damping&quot;</span><span class="p">,</span>
                        <span class="n">command</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">increase</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">button_right</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>

    <span class="c1"># Insert a text-entry field:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">entry</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Entry</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ebutt</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">text</span><span class="o">=</span><span class="s2">&quot;set a&quot;</span><span class="p">,</span>\
                         <span class="n">width</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">command</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">callback</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ebutt</span><span class="o">.</span><span class="n">pack</span><span class="p">(</span><span class="n">side</span><span class="o">=</span><span class="s2">&quot;left&quot;</span><span class="p">)</span>


  <span class="k">def</span> <span class="nf">set_vars</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="c1"># Set initial variables:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">V0</span>   <span class="o">=</span> <span class="mf">12.0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">a</span>    <span class="o">=</span> <span class="mf">0.5</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">b</span>    <span class="o">=</span> <span class="mf">10.0</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">t</span>    <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="o">*</span><span class="n">pi</span><span class="p">,</span> <span class="mi">200</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">vt</span>   <span class="o">=</span> <span class="k">lambda</span><span class="p">:</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">V0</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">exp</span><span class="p">(</span><span class="o">-</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="o">*</span><span class="n">tt</span><span class="p">)</span> <span class="o">*</span>\
                         <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">b</span> <span class="o">*</span> <span class="n">tt</span><span class="p">)</span> <span class="k">for</span> <span class="n">tt</span> <span class="ow">in</span> \ 
                         <span class="bp">self</span><span class="o">.</span><span class="n">t</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="o">=</span> <span class="k">lambda</span><span class="p">:</span>  <span class="s2">&quot;$V_{{0}} = 12.0$</span><span class="se">\n</span><span class="s2">&quot;</span>          \
                       <span class="o">+</span> <span class="s2">&quot;$a={:4.2f}$</span><span class="se">\n</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">a</span><span class="p">)</span>\
                       <span class="o">+</span> <span class="s2">&quot;$b=20.0$&quot;</span>

  <span class="k">def</span> <span class="nf">decrease</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">-=</span> <span class="mf">0.1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

  <span class="k">def</span> <span class="nf">increase</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">+=</span> <span class="mf">0.1</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

  <span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">text</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
    <span class="k">try</span><span class="p">:</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">a</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
      <span class="bp">self</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
      <span class="k">pass</span>

  <span class="k">def</span> <span class="nf">draw</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="n">v</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">vt</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">set_ydata</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">set_label</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">label</span><span class="p">())</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">draw</span><span class="p">()</span>

<span class="n">root</span> <span class="o">=</span> <span class="n">tkinter</span><span class="o">.</span><span class="n">Tk</span><span class="p">()</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">App</span><span class="p">(</span><span class="n">root</span><span class="p">)</span>
<span class="n">root</span><span class="o">.</span><span class="n">mainloop</span><span class="p">()</span>
</pre></div>


<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "left",
        indent = "1em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    var location_protocol = (false) ? 'https' : document.location.protocol;
    if (location_protocol !== 'http' && location_protocol !== 'https') location_protocol = 'https:';
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = location_protocol + '//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' }, Macros: {} }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
            </section>

            <section class="post-info">
                <div class="post-share">
                    <a class="twitter" href="https://twitter.com/share?text=Fast GUI programming with Tk and Python&amp;url=/2019/02/gui-tkint.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <i class="ic ic-twitter"></i><span class="hidden">Twitter</span>
                    </a>
                    <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=/2019/02/gui-tkint.html" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <i class="ic ic-facebook"></i><span class="hidden">Facebook</span>
                    </a>
                    <a class="googleplus" href="https://plus.google.com/share?url=/2019/02/gui-tkint.html" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <i class="ic ic-googleplus"></i><span class="hidden">Google+</span>
                    </a>
                    <div class="clear"></div>
                </div>

                <aside class="post-tags">
<a href="/tag/gui">GUI</a><a href="/tag/tkinter">Tkinter</a><a href="/tag/interactivity">interactivity</a>                </aside>

                <div class="clear"></div>

                <aside class="post-author">


                        <figure class="post-author-avatar">
                            <img src="/assets/images/avatar.png" alt="Victor Do Nascimento" />
                        </figure>
                    <div class="post-author-bio">
                        <h4 class="post-author-name"><a href="/author/victor">Victor Do Nascimento</a></h4>
                            <p class="post-author-about">PhD Candidade in Theoretical and Computational Chemistry at the University of Southampton</p>
                            <span class="post-author-location"><i class="ic ic-location"></i> Bournemouth</span>
                        <!-- Social linkes in alphabet order. -->
                            <span class="post-author-github"><a target="_blank" href="https://github.com/cha10vd"><i class="ic ic-link"></i> GitHub</a></span>
                            <span class="post-author-linkedin"><a target="_blank" href="https://www.linkedin.com/in/https://www.linkedin.com/in/victor-luis-do-nascimento-38a493103/"><i class="ic ic-link"></i> LinkedIn</a></span>
                    </div>
                    <div class="clear"></div>
                </aside>

                </section>


                <aside class="post-nav">
                    <div class="clear"></div>
                </aside>

            </div>
        </article>
    </main>
      <!-- TODO : Body class -->
    <div id="body-class" style="display: none;" class=""></div>

    <footer id="footer">
      <div class="inner">
        <section class="credits">


          <span class="credits-theme">Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a></span>
          <span class="credits-software">Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a></span>
        </section>
      </div>
    </footer>
  </section>

  <script type="text/javascript" src="/theme/js/script.js"></script>

<script type="text/javascript">
    var disqus_shortname = 'adphd-1';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>