<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />


  <title>Graphics with POV-Ray</title>


  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin" />
  <meta name="generator" content="Pelican" />
  <link href="/" rel="canonical" />

  <!-- Feed -->

  <link href="/theme/css/style.css" type="text/css" rel="stylesheet" />

  <!-- Code highlight color scheme -->
      <link href="/theme/css/code_blocks/github.css" rel="stylesheet">


        <link rel="stylesheet" href="/css/tbox.css" type="text/css">


  <!-- Custom fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,300' rel='stylesheet' type='text/css' />
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css" />

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->


  <link href="/2019/01/pov-intro.html" rel="canonical" />

    <meta name="description" content="code { font-family: monospace; } Much of the time, following a calculation of physical propperties of a chemical system, it is of...">

    <meta name="author" content="victor">

    <meta name="tags" content="Graphics">




<!-- Open Graph -->
<meta property="og:site_name" content="AD(P)HD"/>
<meta property="og:title" content="Graphics with POV-Ray"/>
<meta property="og:description" content="code { font-family: monospace; } Much of the time, following a calculation of physical propperties of a chemical system, it is of..."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="/2019/01/pov-intro.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2019-01-29 00:00:00+00:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="/author/victor">
  <meta property="article:publisher" content="https://www.facebook.com/vlnascimento" />
<meta property="article:section" content="Graphics"/>
<meta property="article:tag" content="Graphics"/>
<meta property="og:image" content="/assets/images/page_header.jpg">

<!-- Twitter Card -->

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Graphics with POV-Ray",
  "headline": "Graphics with POV-Ray",
  "datePublished": "2019-01-29 00:00:00+00:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "victor",
    "url": "/author/victor"
  },
  "image": "/assets/images/page_header.jpg",
  "url": "/2019/01/pov-intro.html",
  "description": "code { font-family: monospace; } Much of the time, following a calculation of physical propperties of a chemical system, it is of..."
}
</script>
</head>
<!-- TODO : Body class -->
<body class="home-template">

<nav id="menu">
  <a class="close-button">Close</a>
  <div class="nav-wrapper">
    <p class="nav-label">Menu</p>
    <ul>

                  <li role="presentation"><a href="/category/classical-mechanics">Classical Mechanics</a></li>
                  <li role="presentation"><a href="/category/crystallography">Crystallography</a></li>
                  <li class="nav-graphics active" role="presentation"><a href="/category/graphics">Graphics</a></li>
                  <li role="presentation"><a href="/category/gui-programming">GUI Programming</a></li>
                  <li role="presentation"><a href="/category/mathematics">Mathematics</a></li>
                  <li role="presentation"><a href="/category/miscellania">Miscellania</a></li>
                  <li role="presentation"><a href="/category/vim-scripting">Vim Scripting</a></li>

    </ul>
  </div>
</nav>
    <!-- Progressbar -->
    <div class="progress-container">
        <span class="progress-bar"></span>
    </div>

    <!-- Page Header -->
    <!-- Set your background image for this header on the line below. -->
    <header id="post-header" class="has-cover">
      <div class="inner">
        <nav id="navigation">
            <span id="home-button" class="nav-button">
                <a class="home-button" href="/" title="Home"><i class="ic ic-arrow-left"></i> Home</a>
            </span>
          <span id="menu-button" class="nav-button">
            <a class="menu-button"><i class="ic ic-menu"></i> Menu</a>
          </span>
        </nav>
        <h1 class="post-title">Graphics with POV-Ray</h1>
        <!-- TODO : Proper class for headline -->
        <span class="post-meta">
                <a href="/author/victor">Victor Do Nascimento</a>
            | <time datetime="29 Jan 2019">29 Jan 2019</time>
        </span>
        <!-- TODO : Modified check -->
            <div class="post-cover cover" style="background-image: url('/assets/images/page_header.jpg')">
      </div>
    </header>

  <section id="wrapper">
    <a class="hidden-close"></a>

    <!-- Post content -->
    <main class="content" role="main">
        <article class="post">
        <div class="inner">
            <section class="post-content">
                <style>
code { 
  font-family: monospace;
}
</style>

<p>Much of the time, following a calculation of physical propperties of a chemical system, it is of 
interest to be able to quickly visualize the results with minimal effort.</p>
<p>While there are many readily-downloadable programs out there capable of such feat, we wish to develop
four ourselves a toolkit which may provide us withe the skill to generate graphics from raw data as
if from scratch in a programmatic fashion.</p>
<p>We have several options available to ourselves, for example:</p>
<ul>
<li>Matplotlib</li>
<li>OpenGL</li>
<li>POV-Ray</li>
</ul>
<p>Matplotlib offers ease of use at the cost of limited configurability and poor image quality. OpenGL, 
on the other hand, offers professional graphics at the expense of a high level of programming 
complexity.</p>
<p>As such, POV-Ray serves as a good intermediate. It allows for a discussion of important concepts in
graphical programming without the need for concern over hardware resource allocation.</p>
<h2>The Basic Language Syntax</h2>
<p>The POV-Ray language consists of the following building blocks:</p>
<ul>
<li>Identifiers, </li>
<li>Reserved keywords, </li>
<li>Floating point expressions, </li>
<li>Strings, </li>
<li>Special symbols and </li>
<li>Comments.</li>
</ul>
<p><strong>Indentifiers</strong> are analogous to variables in languages like Python. An identifier may be 1 to 40 
characters long. It may consist of upper and lower case letters, the digits 0 through 9 or an 
underscore character ("_"). the first character must be an alphabetic character.</p>
<p><strong>Comments</strong> have their syntax borrowed from the <strong>C</strong> language and are made using the <strong>//</strong> syntax for
single-line comments and <strong>/* ... */</strong> for multi-line comments. </p>
<h3>Declaring identifiers</h3>
<p>We can set variables via the <em>#declare</em> and <em>#local</em> keywords, depending on the required scope of the
variable, or as it is known in POV-Ray, <em>identifier</em>.</p>
<p>We would thus set the value of pi as follows:</p>
<div class="highlight"><pre><span></span><span class="cp">#declare</span> <span class="n">PI</span> <span class="o">=</span> <span class="mf">3.1415</span><span class="p">;</span>
</pre></div>


<p>This would make PI permanent in duration and global in scope. It could, however, be destroyed by the
use of the <em>#undef</em> directive.</p>
<p>We may also use conditional directives such as <em>#ifdef</em> and <em>#ifndef</em>, in much the same way as in the
C preprocessor. </p>
<h3>Setting up conditionals</h3>
<p>POV-Ray supports <strong>#if</strong>, <strong>#while</strong> and <strong>#case</strong> statements. All must be appropriately followed by
the <strong>#end</strong> statement. </p>
<div class="highlight"><pre><span></span><span class="cp">#declare</span> <span class="n">Which</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
<span class="cp">#if</span> <span class="p">(</span><span class="n">Which</span><span class="p">)</span>
  <span class="nb">box</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">}</span>
<span class="cp">#else</span>
  <span class="nb">sphere</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">}</span>
<span class="cp">#end</span>
</pre></div>


<p>These are complemented by a series of debug directives, outputting to 3 distinct text streams.</p>
<div class="highlight"><pre><span></span><span class="c1">// TEXT_STREAM_DIRECTIVE:</span>
  <span class="cp">#debug</span> <span class="n">STRING</span> <span class="err">|</span> <span class="cp">#error</span> <span class="n">STRING</span> <span class="err">|</span> <span class="cp">#warning</span> <span class="n">STRING</span>
</pre></div>


<p>We could thus complement our conditional expression above as follows:</p>
<div class="highlight"><pre><span></span><span class="cp">#declare</span> <span class="n">Which</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span>
<span class="cp">#if</span> <span class="p">(</span><span class="n">Which</span><span class="p">)</span>
  <span class="nb">box</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">}</span>
  <span class="cp">#debug</span> <span class="s2">&quot;We have a box!\n&quot;</span>
<span class="cp">#else</span>
  <span class="nb">sphere</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">}</span>
  <span class="cp">#debug</span> <span class="s2">&quot;We have a sphere!\n&quot;</span>
<span class="cp">#end</span>
</pre></div>


<h3>Defining macros</h3>
<div class="tBox">
<p><h4>Macro definition</h4></p>
<p>Thinking back to pure C, we can define a macro  in the preprocessor as follows:
  <br>    <code>#define circleArea(r) (3.1415*(r)*(r))</code><br>
  The defined macro is then treated as a name and a string. When that name is encountered in the 
  body of the code, the name is replaced with the string.</p>
</div>
<p>This <em>token substitution</em> feature of macros is largely true of how POV-Ray's functions work. They
do, however, steer away from one largely-abused feature of pure macros.</p>
<p>Taken from the POV-Ray documentation, consider the pure C macro:</p>
<div class="highlight"><pre><span></span><span class="cp">#def Typical_Cmac(Param)</span>
</pre></div>


<p>and you invoke it as:</p>
<div class="highlight"><pre><span></span><span class="n">Typical_Cmac</span><span class="p">(</span><span class="k">else</span> <span class="n">A</span><span class="o">=</span><span class="n">B</span><span class="p">)</span>
</pre></div>


<p>The <strong>else</strong>, <strong>A</strong>, <strong>=</strong>, <strong>B</strong> would substituted into the program code in place of <strong>Param</strong> 
using a cut-and-paste operation. No type checking is performed because anything is legal if all
you're doing is copying and pasting.</p>
<p>Function parameters in traditional programming languages do not use token substitution to pass values.
They create temporary, local variables to store parameters that are either constant values or 
identifier references which are in effect a pointer to a variable. POV-Ray macros use this 
function-like system for passing parameters to its macros.</p>
<p>With all this in mind, we could then define a macro in POV-Ray as follows:</p>
<div class="highlight"><pre><span></span><span class="c1">// Define the macro. Parameters are:</span>
<span class="c1">//   T:  Middle value of time</span>
<span class="c1">//   T1, T2: Initial and final time</span>
<span class="c1">//   P1, P2: Initial and final position </span>
<span class="c1">//           (may be float, vec or color)</span>
<span class="cp">#macro</span> <span class="n">Interpolate</span><span class="p">(</span><span class="n">T</span><span class="p">,</span><span class="n">T1</span><span class="p">,</span><span class="n">T2</span><span class="p">,</span><span class="n">P1</span><span class="p">,</span><span class="n">P2</span><span class="p">)</span>
   <span class="p">(</span><span class="n">P1</span><span class="o">+</span><span class="p">(</span><span class="n">T1</span><span class="o">+</span><span class="n">T</span><span class="o">/</span><span class="p">(</span><span class="n">T2</span><span class="o">-</span><span class="n">T1</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">P2</span><span class="o">-</span><span class="n">P1</span><span class="p">))</span>
<span class="cp">#end</span>
</pre></div>


<p>We could then call upon this function as follows:</p>
<div class="highlight"><pre><span></span>  <span class="cp">#declare</span> <span class="n">Value</span> <span class="o">=</span> <span class="n">Interpolate</span><span class="p">(</span><span class="n">I</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">15</span><span class="p">,</span><span class="mf">3.0</span><span class="p">,</span><span class="mf">5.5</span><span class="p">)</span><span class="o">*</span><span class="mi">15</span><span class="p">;</span>
</pre></div>


<p>Finally, an important point about the macro/function duality. Note the outer parenthesese in the
returned value of our macro. Our call to Iterpolate is treated by the program as if we had written:</p>
<div class="highlight"><pre><span></span>  <span class="cp">#declare</span> <span class="n">Value</span> <span class="o">=</span> <span class="p">(</span><span class="n">P1</span><span class="o">+</span><span class="p">(</span><span class="n">T1</span><span class="o">+</span><span class="n">T</span><span class="o">/</span><span class="p">(</span><span class="n">T2</span><span class="o">-</span><span class="n">T1</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">P2</span><span class="o">-</span><span class="n">P1</span><span class="p">))</span> <span class="o">*</span> <span class="mi">15</span><span class="p">;</span>
</pre></div>


<p>There is no temporary variable acting as intermediary in the <strong>Value</strong> calculation to which the
result of ouri nterpolate fuction is returned prior to the subsequent multiplication. This results
in the need to carefully consider the order in which operations are carried out. Omitting the outer
parentheses would result in our calculation of the following:</p>
<div class="highlight"><pre><span></span>  <span class="cp">#declare</span> <span class="n">Value</span> <span class="o">=</span> <span class="n">P1</span><span class="o">+</span><span class="p">(</span><span class="n">T1</span><span class="o">+</span><span class="n">T</span><span class="o">/</span><span class="p">(</span><span class="n">T2</span><span class="o">-</span><span class="n">T1</span><span class="p">))</span><span class="o">*</span><span class="p">(</span><span class="n">P2</span><span class="o">-</span><span class="n">P1</span><span class="p">)</span> <span class="o">*</span> <span class="mi">15</span><span class="p">;</span>
</pre></div>


<p>By BODMAS, the P1 is not multiplied by 15 and we get the wrong answer.</p>
<!--(### Observer vs. Observed
In generating an image based on positions of objects (be these atoms, bonds or isosurfaces), we are
required to fully specify two objects:
1. That which we are observing,
2. The camera through which we observe our object.
#### Specifying the camera
Specifying the camera is a relatively easy task, as it is an abstract object in space. it needs not 
have a shape or any such geometric parameters, neither must it be given color, as it won't be seen.
We must therefore specify 3 parameters, each comprised of a vector in space.)-->
            </section>

            <section class="post-info">
                <div class="post-share">
                    <a class="twitter" href="https://twitter.com/share?text=Graphics with POV-Ray&amp;url=/2019/01/pov-intro.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <i class="ic ic-twitter"></i><span class="hidden">Twitter</span>
                    </a>
                    <a class="facebook" href="https://www.facebook.com/sharer/sharer.php?u=/2019/01/pov-intro.html" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;">
                    <i class="ic ic-facebook"></i><span class="hidden">Facebook</span>
                    </a>
                    <a class="googleplus" href="https://plus.google.com/share?url=/2019/01/pov-intro.html" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;">
                    <i class="ic ic-googleplus"></i><span class="hidden">Google+</span>
                    </a>
                    <div class="clear"></div>
                </div>

                <aside class="post-tags">
<a href="/tag/graphics">Graphics</a>                </aside>

                <div class="clear"></div>

                <aside class="post-author">


                        <figure class="post-author-avatar">
                            <img src="/assets/images/avatar.png" alt="Victor Do Nascimento" />
                        </figure>
                    <div class="post-author-bio">
                        <h4 class="post-author-name"><a href="/author/victor">Victor Do Nascimento</a></h4>
                            <p class="post-author-about">PhD Candidade in Theoretical and Computational Chemistry at the University of Southampton</p>
                            <span class="post-author-location"><i class="ic ic-location"></i> Bournemouth</span>
                        <!-- Social linkes in alphabet order. -->
                            <span class="post-author-github"><a target="_blank" href="https://github.com/cha10vd"><i class="ic ic-link"></i> GitHub</a></span>
                            <span class="post-author-linkedin"><a target="_blank" href="https://www.linkedin.com/in/https://www.linkedin.com/in/victor-luis-do-nascimento-38a493103/"><i class="ic ic-link"></i> LinkedIn</a></span>
                    </div>
                    <div class="clear"></div>
                </aside>

                </section>


                <aside class="post-nav">
                    <div class="clear"></div>
                </aside>

            </div>
        </article>
    </main>
      <!-- TODO : Body class -->
    <div id="body-class" style="display: none;" class=""></div>

    <footer id="footer">
      <div class="inner">
        <section class="credits">


          <span class="credits-theme">Theme <a href="https://github.com/arulrajnet/attila" rel="nofollow">Attila</a></span>
          <span class="credits-software">Published with <a href="https://github.com/getpelican/pelican" rel="nofollow">Pelican</a></span>
        </section>
      </div>
    </footer>
  </section>

  <script type="text/javascript" src="/theme/js/script.js"></script>

<script type="text/javascript">
    var disqus_shortname = 'adphd-1';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>